---
layout: post        # å¿…é¡»æŒ‡å®šå¸ƒå±€ï¼Œé€šå¸¸æ˜¯ post æˆ– page
title: "ç¼–ç¨‹å·¥å…·"    # æ˜¾ç¤ºåœ¨ä¾§è¾¹æ å’Œé¡µé¢é¡¶éƒ¨çš„æ ‡é¢˜
description: "æ‰€æœ‰ç¼–ç¨‹è½¯ä»¶/å‘½ä»¤/å·¥å…·"  # å¯é€‰ï¼Œç”¨äº SEO æˆ–æœç´¢é¢„è§ˆ
---


# VSCODE

https://vscode.js.cn/docs/debugtest/tasks



*tasks.json*

*launch.json*



# Googletest

https://google.github.io/googletest/

ä»–æ˜¯å°†æµ‹è¯•ä»£ç ç”Ÿæˆç›®æ ‡æ–‡ä»¶ã€‚

## gtest

### TEST_F

é™¤äº†æœ€åŸºæœ¬çš„`TEST`å®ä¹‹å¤–ï¼Œ`TEST_F`ä¼šä¸ºåŒä¸€ä¸ª*testsuite*ä¸‹çš„å¤šä¸ªæµ‹è¯•ç”¨ä¾‹å…±äº«æ•°æ®ç»“æ„å’Œæ–¹æ³•ã€‚

- *setup* å’Œ *teardown* ä¼šåœ¨æ¯ä¸ªæµ‹è¯•ç”¨ä¾‹æ‰§è¡Œä¹‹å‰/å®Œæ¯•ä¹‹åè°ƒç”¨ã€‚
- å¯ä»¥å®šä¹‰å…±äº«æ–¹æ³•ã€‚

```cpp
class RingBufferTest:public::testing::Test
{
protected:
    RingBuffer* rb;
    void SetUp() override {
        rb = ringBufferCreate();
        ASSERT_NE(rb, nullptr);
    }
    void TearDown() override {
        free(rb);
    }
    void goodbuffer() {return;}
};
```



## gmock

ä½¿ç”¨ï¼šå®šä¹‰mockç±»ï¼Œ ç»§æ‰¿ä¸€ä¸ªæ¥å£

```cpp
#include <gmock/gmock.h>

// æ¥å£éƒ½æ˜¯è™šå‡½æ•°
class DatabaseInterface {
public:
    virtual ~DatabaseInterface() {}
    virtual bool Open(const std::string& db_name) = 0;
    virtual int Query(const std::string& sql) = 0;
};

// åˆ›å»º Mock ç±»
class MockDatabase : public DatabaseInterface {
public:
    // è¯­æ³•: MOCK_METHOD(è¿”å›ç±»å‹, æ–¹æ³•å, (å‚æ•°åˆ—è¡¨), (ä¿®é¥°ç¬¦));
    MOCK_METHOD(bool, Open, (const std::string& db_name), (override));
    MOCK_METHOD(int, Query, (const std::string& sql), (override));
};

```



```cpp
using ::testing::Return;
using ::testing::_;

TEST(MyAppTest, DatabaseFlow) {
    MockDatabase mock_db;

    // è®¾ç½®æœŸæœ›è¡Œä¸º (Expectations)
    EXPECT_CALL(mock_db, Open("test_db"))
        .WillOnce(Return(true)); // æœŸæœ›è°ƒç”¨ä¸€æ¬¡ Openï¼Œè¿”å› true

    EXPECT_CALL(mock_db, Query(_)) // _ æ˜¯é€šé…ç¬¦ï¼Œè¡¨ç¤ºåŒ¹é…ä»»ä½•å‚æ•°
        .Times(2)                   // æœŸæœ›è¢«è°ƒç”¨ä¸¤æ¬¡
        .WillRepeatedly(Return(100)); // æ¯æ¬¡è°ƒç”¨éƒ½è¿”å› 100

    // è°ƒç”¨è¢«æµ‹ä»£ç  (å®é™…ç”Ÿäº§ä»£ç ä¸­ä¼šæ³¨å…¥ mock_db)
    ASSERT_TRUE(mock_db.Open("test_db"));
    ASSERT_EQ(mock_db.Query("SELECT *"), 100);
    ASSERT_EQ(mock_db.Query("UPDATE..."), 100);
} // å½“ mock_db ææ„æ—¶ï¼ŒgMock ä¼šè‡ªåŠ¨æ£€æŸ¥ä¸Šè¿°æœŸæœ›æ˜¯å¦å…¨éƒ¨è¾¾æˆ

```





# pstack



# makefile

 å¦‚æœä¸€è¡Œå¤ªé•¿ï¼Œç”¨/è¿æ¥

```
SRC_SERVER = array.c connect_manager.c connection_table.c connection.c \
log.c message_manager.c message_queue.c message.c mutex.c server.c socket.c queue.c
```

-n é€‰é¡¹ä¼š æ‰“å°ç¼–è¯‘å‘½ä»¤ï¼Œä½†ä¸ä¼šå®é™…æ‰§è¡Œã€‚

-B å¼ºåˆ¶é‡æ–°ç¼–è¯‘: æ— è§†æ—¶é—´æˆ³

make çš„ä¾èµ–æ£€æµ‹æœºåˆ¶ï¼šçœ‹binæ–‡ä»¶çš„æ—¶é—´æˆ³å’Œæºæ–‡ä»¶çš„æ—¶é—´æˆ³ï¼Œå¦‚æœbinæ¯”è¾ƒæ–°ï¼Œé‚£å°±è®¤ä¸ºmake update

gcc -c åªç¼–è¯‘ä¸é“¾æ¥ï¼Œç”Ÿæˆç›®æ ‡æ–‡ä»¶

gcc -o ç¼–è¯‘å¹¶é“¾æ¥ï¼Œç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶

wildcard

SRCS = $(SRC_DIR)/*.c

SRCS = $(wildcard $(SRC_DIR)/*.c)

å‰è€…ä¸ä¼šå±•å¼€ åªæœ‰åœ¨ bashå‘½ä»¤å¦‚lsä¸‹é¢ç®¡ç”¨ã€‚

gcc é»˜è®¤å¤´/usr/include, /usr/local/include, åº“æ–‡ä»¶/usr/lib, /usr/local/lib

\#é»˜è®¤å¤´æ–‡ä»¶è·¯å¾„ starts here

gcc -xc -E -v -

\# é»˜è®¤åº“æ–‡ä»¶è·¯å¾„

gcc -print-search-dirs

\# ç‰¹å®šåº“è·¯å¾„. å¦‚æœæœ‰è¿”å›ï¼Œå³æœ‰å­˜åœ¨

gcc -print-file-name=libcrypto.so

\# æŒ‡å®šåº“è·¯å¾„

gcc main.c -o my_program -L/usr/local/ssl/lib -lssl -lcrypto

é“¾æ¥-lä¸€å®šè¦æ”¾åœ¨gccæœ€å

$@ ä»£è¡¨å½“å‰è§„åˆ™çš„ç›®æ ‡å

# gdb



**`-exec info threads`**

è°ƒè¯•æ§åˆ¶å°æ‰§è¡Œgdbå‘½ä»¤

ä¸¤ç§è®¾ç½®å‚æ•°ï¼š

gdb ./kilo

(gdb) set args t.txt

(gdb) ru

gdb --args ./bin/redis --sentinel --config conf/server.conf

Watch Info watch Delete num

æ€ä¹ˆè®©gdbè°ƒè¯•ç¨‹åº æ¯”å¦‚è¾“å‡ºåœ¨å¦å¤–ä¸€ä¸ªçª—å£ï¼Ÿ

é‡å®šå‘ æ–¹æ³•1ï¼šğŸ‘Œ run > output.log run > output.log 2>&1 æ–¹æ³•2ï¼š gdb ./myprogram > output.log

Segmentation fault (core dumped)æº¯æºï¼š Run ç¨‹åºå´©æºƒåï¼Œä¼šæç¤º Segmentation faultï¼Œå¹¶æ˜¾ç¤ºå‡º å´©æºƒå‘ç”Ÿçš„ä½ç½®ï¼š

p/s

p/x

p/c

x/5xb

x/5cb

 gdb æ–­ç‚¹åœ¨å­è¿›ç¨‹ç”Ÿæ•ˆå—? é»˜è®¤ä¸ç”Ÿæ•ˆï¼Œæç¤ºdetachã€‚     â‘ . æ–¹æ³•ä¸€     (gdb) set detach-on-fork off é€šè¿‡è®¾ç½®åŒæ—¶è°ƒè¯•çˆ¶å­ã€‚     åˆ‡æ¢å‘½ä»¤ï¼š         â€¢ info inferiorsï¼šæŸ¥çœ‹å½“å‰æ‰€æœ‰å—æ§è¿›ç¨‹ã€‚         â€¢ inferior <id>ï¼šåˆ‡æ¢åˆ°æŒ‡å®šè¿›ç¨‹è¿›è¡Œè°ƒè¯•ã€‚     ç¼ºç‚¹ï¼šä½†æ˜¯å¦‚æœçˆ¶äº²å¤„äºç›‘å¬é˜»å¡ï¼Œæ— æ³•è¾“å…¥å‘½ä»¤     â‘¡. æ–¹æ³•äºŒ     (gdb) set follow-fork-mode child è‡ªåŠ¨åˆ‡æ¢åˆ°å­è¿›ç¨‹ï¼Œä¸ç®¡çˆ¶äº²ã€‚ â€¢ (gdb) set args --port 6379

# tcpdump

tcpdump tcp port 5000 and host 210.27.48.1 

tcpdump port 5000 || port 3000

lsof -i:ç«¯å£

kill -9 pid

æŸ¥çœ‹è¿›ç¨‹ä¸‹çº¿ç¨‹é«˜å ç”¨ï¼š

top -Hp pid

ç½‘ç»œ

/resolv.conf

ç›‘æµ‹æœ¬åœ°ç«¯å£ä¸Šæ•°æ®ï¼šsudo tcpdump -i lo port 1883 -X

æŸ¥çœ‹æ‰€æœ‰ç½‘ç»œæ¥å£ï¼šsudo tcpdump -D

# cmake

## [å‚è€ƒ](https://www.runoob.com/cmake/cmake-build-demo.html); 



REQUIRED è¡¨ç¤ºå¼‚å¸¸å°±æŠ¥é”™

## æµç¨‹ï¼š

CMakeLists.txt å®šä¹‰é¡¹ç›®æ„å»ºè§„åˆ™

cmakeç”Ÿæˆæ„å»ºæ–‡ä»¶

makeæ‰§è¡Œæ„å»ºã€‚

cmakeçš„ç›®æ ‡å¯ä»¥æ˜¯åº“ï¼Œä¹Ÿå¯æ˜¯æ‰§è¡Œç¨‹åºã€‚å‰è€…æ²¡æœ‰main

## åŸºç¡€é€‰é¡¹ï¼š

- CMAKEæœ€ä½ç‰ˆæœ¬ï¼š`cmake_minimum_required(VERSION  3.10)`

- é¡¹ç›®åç§°ã€è¯­è¨€ï¼š`project(MyProject C)`

- æŒ‡å®šæ‰§è¡Œæ–‡ä»¶å’Œä¾èµ–æºæ–‡ä»¶ï¼š`add_executable(MyExecutable     main.c other_file.c)`

- åˆ›å»ºä¸€ä¸ªåº“, STATICè¡¨ç¤ºé™æ€åº“ï¼š`add_library(MyLibrary STATIC library.c)`

- é“¾æ¥ç›®æ ‡æ–‡ä»¶å’Œå…¶ä»–åº“ï¼š`target_link_libraries(MyExecutable MyLibrary)`

- æ·»åŠ å¤´æ–‡ä»¶æœç´¢è·¯å¾„ï¼Œå…¨å±€è®¾ç½®ï¼Œå½±å“æ‰€æœ‰ç›®æ ‡ã€‚`include_directoriesï¼š${CMAKE_SOURCE_DIR}/include`

- è®¾ç½®å˜é‡å€¼ï¼š`set(CMAKE_CXX_STANDARD 11)`

- æŒ‡å®šåº“ç›®å½•æœç´¢è·¯å¾„:
          
    ```cmake
    add_library(mylib STATIC mylib.c)
    target_include_directories(mylib
      PUBLIC # è¿™äº›å¤´æ–‡ä»¶ç”¨äºå½“å‰target, å¹¶ä¼ é€’ç»™å…¶ä»–ä½¿ç”¨è¿™ä¸ªtargetçš„target
      ${CMAKE_SOURCE_DIR}/include
    )
    ```

- æ¡ä»¶è¯­å¥

    ```CMAKE
    if(expression)
     # Commands
    elseif(expression)
     # Commands
    else()
     # Commands
    endif()
    ```

- å®‰è£…ç›®æ ‡åˆ°æŒ‡å®šç›®å½•

    installä¾‹å­ï¼š

    ```CMAKE
    add_executable(myapp main.c)
    add_library(mylib STATIC mylib.c)
    install(TARGETS myapp mylib
        RUNTIME DESTINATION bin   # å®‰è£…å¯æ‰§è¡Œæ–‡ä»¶åˆ° bin/
        ARCHIVE DESTINATION lib   # å®‰è£…é™æ€åº“åˆ° lib/
        INCLUDES DESTINATION include # å¦‚æœè®¾ç½®äº† target_include_directoriesï¼Œä¼šè¦†ç›–ç”Ÿæ•ˆ
    )
    ```

    å®‰è£…çš„ç»“æœï¼š`<install-prefix>/..`
    *install-prefix*ç”±*CMAKE_INSTALL_PREFIX*å†³å®šï¼Œé»˜è®¤æ˜¯*/usr/local*

- æ™®é€šå˜é‡å’Œç¼“å­˜å˜é‡ï¼š

  ç¼“å­˜å˜é‡å¯ä»¥åœ¨CMAKEé…ç½®æ—¶ä¿®æ”¹ã€‚

  `set(MY_CACHE_VAR "DefaultValue" CACHE STRING "A cache variable")`

  `set(MY_VAR "HELLO")`

- æŸ¥æ‰¾åº“å’ŒåŒ…

     `find_package(<PackageName> [version] [REQUIRED] [components...])`
     `find_package(GLib  REQUIRED)` æ‰¾glibåº“ï¼Œæ‰¾ä¸åˆ°å°±ä¸­æ–­æ„å»ºã€‚ componentsè¡¨ç¤ºå­æ¨¡å—ã€‚
     ä¼šè‡ªåŠ¨è®¾ç½®å¯¹åº”çš„å¤´æ–‡ä»¶ç›®å½•å’Œåº“æ–‡ä»¶ç›®å½•å˜é‡ã€‚ *GLIB_INCLUDE_DIRS, GLIB_LIBRARIES*
     æŸ¥æ‰¾è·¯å¾„ï¼šç³»ç»Ÿé»˜è®¤ï¼›*CMAKE_PREFIX_PATH*
     è¦æ±‚åº“å¿…é¡»æ”¯æŒ*.cmake*ï¼Œå³å®ç°äº†*PACKAGE.cmake* æä¾›ä¿¡æ¯ã€‚
     ä¼šæœ‰å¯¹åº”è¾“å‡ºæç¤º
     `-- Found PkgConfig: /usr/bin/pkg-config (found version "1.8.1") `

- è®¾ç½®å®ï¼š

     `target_compile_definitions(ç›®æ ‡å PRIVATE LOG_LEVEL=3) `

     `add_definitions(-DPROJECT_ROOT="${PROJECT_SOURCE_DIR}")`

- é¢„è®¾ï¼š
     `CMAKE_CURRENT_SOURCE_DIR`æ˜¯æŒ‡CMakeLists.txtæ‰§è¡Œæ‰€åœ¨ç›®å½•
     `CMAKE_SOURCE_DIR` é¡¶å±‚ CMakeLists.txt æ‰€åœ¨ç›®å½•ï¼ˆæ ¹ç›®å½•ï¼‰

     `project_source_dir `: cmakeæ‰§è¡Œæ‰€åœ¨ç›®å½•

     `CMAKE_CURRENT_SOURCE_DIR `; åŒæ ·,ä¸ºcmakeæ‰§è¡Œè·¯å¾„

- *message*è¾“å‡ºï¼š

     ```CMAKE
     message(NOTICE "HELLO") # é»˜è®¤
     message(STATUS "set var:")
     message(WARNING "WARN!!")
     message(FATAL_ERROR "ERROR!!") # ç»ˆæ­¢cmake
     ```

- æµ‹è¯•

     ```cmake
     include(ctest)
     enable_testing()
     add_executable(my_test test_main.cpp)
     # å®šä¹‰ä¸€ä¸ªåä¸º "RunMyTest" çš„æµ‹è¯•ï¼Œè¿è¡Œ my_test ç¨‹åº
     add_test(NAME RunMyTest COMMAND my_test)
     ```


## åœºæ™¯

### å¯¼å…¥ä¸‰æ–¹åº“å§¿åŠ¿ï¼š

1. æ”¯æŒ.cmake

  ```CMAKE
  find_package(OpenSSL REQUIRED) # ä¼šåˆ›å»º`OpenSSL::SSL` å’Œ`OpenSSL:Crypto`
  target_link_libraries(my_app PRIVATE OpenSSL::SSL) #  OpenSSL::SSL åŒ…å« SSL åŠŸèƒ½ï¼Œä¸”è‡ªåŠ¨ä¾èµ– OpenSSL::Crypto
  message(STATUS "OpenSSL version: ${OPENSSL_VERSION}")
  message(STATUS "OpenSSL include dir: ${OPENSSL_INCLUDE_DIR}")
  ```

  2. å¦‚æœä¸æ”¯æŒ.cmake,åº“æ”¯æŒpkg-configï¼Œé€šè¿‡pkg-configè¿”å›å˜é‡

  ` pkg_check_modules(<prefix> [REQUIRED] <module> [<module>...]) `

  prefixä¸ºè¾“å‡ºå˜é‡çš„å‰ç¼€ï¼Œç”Ÿæˆçš„å˜é‡æœ‰ï¼šprefix_VERSION..
  ` find_package(PkgConfig REQUIRED)` `pkg_check_modules(GLIB REQUIRED glib-2.0)`

   å¯¹åº”è¾“å‡º`-- Checking for module 'glib-2.0' -- Found glib-2.0, version 2.74.6`
   ä¸”ä¼šè‡ªåŠ¨è®¾ç½®å¯¹åº”ç›®å½•` message(STATUS "GLIB_INCLUDE_DIRS: ${GLIB_INCLUDE_DIRS}")`

  3. è‡ªå®šä¹‰çš„ç›®å½•ï¼Œvscoeä¸ä¼šé€’å½’æŸ¥æ‰¾ã€‚

     æ¯”å¦‚include/glib, vscodeåªæ˜¯æ‰¾includeä¸‹é¢ï¼Œglibä¸‹é¢ä¸ä¼š

### å¾—åˆ°æ‰€æœ‰å˜é‡

```cmake
get_cmake_property(_variableNames VARIABLES)
foreach (_var ${_variableNames})
message(STATUS "${_var}=${${_var}}")
endforeach ()
```

### åµŒå¥—cmake

é¡¹ç›®ç»“æ„ä¸­ï¼Œéœ€è¦åµŒå¥—å­åº“å­æ¨¡å—ï¼Œæ¯”å¦‚æœ‰ä¸€ä¸ªå­ç›®å½•åº“mempoolï¼Œåœ¨ä¸»cmakeä¸­åŠ å…¥`add_subdirectory(mempool)`

å¤šä¸ªå­æ¨¡å—ä½¿ç”¨ä¸€ä¸ªåº“ï¼Œåªè¦åœ¨é¡¶éƒ¨find_package()ä¸€æ¬¡å°±è¡Œ

## æ„å»ºæµç¨‹

```shell
mkdir build
cd build
cmake ..
make
make MyExecutable
make clean
```

**ä»…ä¿®æ”¹æºæ–‡ä»¶.c.h**ï¼šç›´æ¥makeå³å¯

**æ›´æ”¹ç¼–è¯‘é€‰é¡¹ç­‰**ï¼šéœ€è¦*cmake ..*é‡æ–°

*cmake ..*å‚æ•°ä¸ºè·¯å¾„ï¼Œåˆ°å“ªé‡Œæ‰§è¡Œcmake

## æµ‹è¯•

ctestæ˜¯æ‰§è¡Œç›®æ ‡æ–‡ä»¶ã€‚gtestæ˜¯ç”Ÿæˆç›®æ ‡æ–‡ä»¶ã€‚

ä¹Ÿå°±æ˜¯é€šè¿‡ gteståº“ç”Ÿæˆç›®æ ‡æ–‡ä»¶

é€šè¿‡addtestæ·»åŠ æ‰§è¡Œä»»åŠ¡



## è·¯å¾„

cmake-build-debugé»˜è®¤æ–‡ä»¶å¤¹ï¼Œè€Œä¸æ˜¯build





# vim

vim -b /tmp/mypool.dat

:%!xxd

:% è¡¨ç¤ºå¯¹æ•´ä¸ªæ–‡ä»¶è¿›è¡Œæ“ä½œã€‚

! è¡¨ç¤ºæ‰§è¡Œå¤–éƒ¨å‘½ä»¤ã€‚

xxd æ˜¯ä¸€ä¸ªåå…­è¿›åˆ¶ç¼–è¾‘å·¥å…·ï¼Œå®ƒå¯ä»¥å°†æ–‡ä»¶çš„å†…å®¹è½¬æ¢ä¸ºåå…­è¿›åˆ¶æ ¼å¼å¹¶æ˜¾ç¤ºå‡ºæ¥ã€‚

 

# git

## git è¿œç¨‹SSHï¼Œ httpsæ–¹å¼

ssh -T git@github.com

git remote -v

git remote set-url origin https://github.com/ddongzi/ddongzi.github.io.git

git remote set-url origin git@github.com:ddongzi/ddongzi.github.io.git

æŠ¥é”™ï¼š æ”¹ç”¨httpsï¼Œåˆ‡æ¢vpn

fetch-pack: unexpected disconnect while reading sideband packet fatal: early EOF fatal: unpack-objects failed

ä¸´æ—¶ä»£ç†

git config --global url."[https://ghfast.top/https://github.com/](https://ghfast.top/https:/github.com/)".insteadOf " https://github.com/" 

git config --global --unset url."[https://ghfast.top/https://github.com/](https://ghfast.top/https:/github.com/)".insteadOf

## .gitignore

**/data/ å¿½ç•¥ä»»æ„ç›®å½•ä¸‹çš„dataç›®å½•

**/data/* å¿½ç•¥ä»»æ„ç›®å½•ä¸‹çš„dataç›®å½•ä¸‹æ–‡ä»¶ï¼Œä½†ä¿ç•™ç›®å½•æœ¬èº«ï¼Œåœ¨dataä¸‹æ”¾.gitkeepç©ºæ–‡ä»¶

å¯¹å·²ç»æäº¤åˆ° Git ä»“åº“é‡Œçš„æ–‡ä»¶ï¼Œåç»­ .gitignore æ˜¯æ— æ•ˆçš„ã€‚

git rm -r --cached åˆ é™¤æš‚å­˜åŒºçš„æ–‡ä»¶ã€‚ git rm -r --cached *.json

git status --ignored

## ä»commitç‚¹ å»ºç«‹æ–°åˆ†æ”¯ï¼š

\# ä»æŒ‡å®šæäº¤åˆ›å»ºæ–°åˆ†æ”¯

git checkout -b new-branch-name abc1234aaaaaaaaa

\# æ¨é€åˆ°è¿œç¨‹å¹¶å»ºç«‹å…³è”

git push -u origin new-branch-name

git branch      # çœ‹å½“å‰æœ‰å“ªäº›åˆ†æ”¯

git log --oneline --graph --all  # æŸ¥çœ‹å†å²æäº¤å›¾

## åˆ†æ”¯å†…å®¹äº¤æ¢

\# 1ï¸âƒ£ å¤‡ä»½ main

git branch temp main

\# 2ï¸âƒ£ ç”¨ branch1 çš„å†…å®¹è¦†ç›– main

git checkout main

git reset --hard branch1

\# 3ï¸âƒ£ ç”¨åŸ mainï¼ˆtempï¼‰çš„å†…å®¹è¦†ç›– branch1

git checkout branch1

git reset --hard temp

\# 4ï¸âƒ£ åˆ é™¤ä¸´æ—¶åˆ†æ”¯

git branch -d temp

\# å¼ºåˆ¶è¿œç¨‹åŒæ­¥

git push origin main --force

git push origin branch1 --force

## åˆ†æ”¯é‡æ–°å‘½åï¼š

git checkout branch1 # æ—§åˆ†æ”¯

\# é‡å‘½åæœ¬åœ°åˆ†æ”¯

git branch -m feature-miner

\# åˆ é™¤è¿œç¨‹æ—§åˆ†æ”¯

git push origin --delete branch1

\# æ¨é€æ–°åˆ†æ”¯å¹¶å»ºç«‹è¿½è¸ªå…³ç³»

git push origin feature-miner

git push --set-upstream origin feature-miner

## pick

ä»å…¶ä»–åˆ†æ”¯pickä¸€äº›commitè¿‡æ¥ï¼š

git check-pick <commit-id>

## è¿œç¨‹æäº¤æ’¤å›åˆ°æŸä¸ªç‰ˆæœ¬

git reset --soft ç‰ˆæœ¬å·

## å­æ¨¡å—ï¼š

## ALLCODEæ˜¯ä¸€ä¸ªå¤§ä»“åº“ï¼Œå­˜æ”¾ä¸æˆç†Ÿçš„å„é¡¹ç›®ï¼Œå„é¡¹ç›®éƒ½æ˜¯ç‹¬ç«‹çš„gitåº“ï¼Œä»¥åæˆç†Ÿå¯ä»¥ç‹¬ç«‹è¿å‡ºã€‚

git submodule add ./pool pool æœ€åä¸¤ä¸ªå‚æ•°ï¼šå­åº“è·¯å¾„è¿œç¨‹URLï¼Œå­åº“è¦æŒ‚è½½åˆ°å¤§ä»“åº“çš„å­ç›®å½•ã€‚ å³ä¸åœ¨ä¸»ä»“çš„åº“ä¹Ÿèƒ½æˆä¸ºå­åº“

å¦‚æœç›´æ¥åœ¨å¤§ä»“åº“ç›´æ¥ï¼Œ addç›®å½•ä¼šæç¤ºã€‚ å­åº“è·¯å¾„å¿…é¡»æ˜¯URL

## åˆ é™¤åˆ†æ”¯

git branch -D branch1

git push origin --delete branch1

## å…‹éš†çš„å¤ªå¤§ï¼Œå…‹éš†ä¸ä¸‹æ¥

å¤§çš„åº“ï¼Œå­æ¨¡å—æ‹‰å–ï¼Œå¾ˆå¤šå¾ˆä¹…ï¼Œç»å¸¸ä¸­é—´å‡ºé”™ã€‚ gitæ”¯æŒç«¯ç‚¹ç»­ä¼ ï¼Œ

git submodule update --init --recursive --progress

git config --global http.postBuffer 2147483648 # 2GB git config --global core.compression 0 # å…³é—­å‹ç¼©ï¼ŒåŠ å¿«ä¸‹è½½é€Ÿåº¦

## --depth=1

git cloneçš„æ˜¯å…¨éƒ¨çš„å†å²æäº¤è®°å½•ï¼Œå¦‚æœåªè¦æœ€æ–°çš„ --depth=1. æ³¨æ„zipå¾—åˆ°çš„ä¸æ˜¯gitåº“

--depth=1 å¤–å±‚ä»“åº“ çš„statusä¸ä¼šè®°å½•ï¼Œä¸ä¼šè‡ªåŠ¨æ›´æ–°ã€‚å¦‚æœè¦æ›´æ–°ï¼Œéœ€è¦æ‰‹åŠ¨pullæ‹‰å–ã€‚æ‰€ä»¥è¿™æ˜¯æƒå®œä¹‹ç­–ã€‚ï¼

å¦‚ components/esp_wifi/lib

## åˆå¹¶å‡ æ¬¡æäº¤

git rebase -i HEAD~N

ä¿®æ”¹é™¤äº†ç¬¬ä¸€ä¸ªæäº¤ä»¥å¤–çš„ pick ä¸º squash æˆ– sï¼š

# åŒ…ç®¡ç†ï¼ŒæŸ¥æ‰¾å¤´æ–‡ä»¶

# ç¯å¢ƒ

## å†…ç½®ç¯å¢ƒ

$ python3 -m venv .venv

$ source .venv/bin/activate

deactivate

## Miniconda

https://www.anaconda.com/docs/getting-started/miniconda/install#linux

[nju mirror](https://mirror.nju.edu.cn/mirrorz-help/anaconda/?mirror=NJU)

```cmd
conda config --show

conda create -n your_env_name python=x.x

conda activate env_name 

conda env list

conda config --set auto_activate false

conda env remove --name env_name
```



# man(manual)

 æ ‡å‡†æ–¹æ³•ï¼šç›´æ¥ç”¨ man 3 å‡½æ•°åã€‚

æ¯”å¦‚æŸ¥ fopenï¼š

man 3 fopen

è§£é‡Šï¼š

man æ˜¯ manualï¼ˆæ‰‹å†Œï¼‰ã€‚

3 æ˜¯ åº“å‡½æ•°ï¼ˆC standard libraryï¼‰ çš„ç« èŠ‚å·ã€‚ï¼ˆfopen å±äºç¬¬3ç« ï¼‰

- man 1 xxx â€” å‘½ä»¤ï¼ˆlsã€gccç­‰ï¼‰
- man 2 xxx â€” ç³»ç»Ÿè°ƒç”¨ï¼ˆopenã€readã€writeã€fork, getsockoptï¼‰
- man 3 xxx â€” Cåº“å‡½æ•°ï¼ˆfopenã€printfã€mallocï¼‰

# Valgrind

Invalid write of size 4

clioné…ç½®



# netstat

`netstat -i` æ¥å£ä¿¡æ¯

`netstat -ni` nè¡¨ç¤ºç”¨æ•°å­—æ˜¾ç¤ºï¼Œä¸è§£é‡Š

`netstat -nr` è·¯ç”±

`netstat -p` æ˜¾ç¤ºå…³è”è¿›ç¨‹

`netstat -t/-u` æ˜¾ç¤ºtcp/udp

`netstat -a` æ˜¾ç¤ºæ‰€æœ‰æ¥å£.ã€‚ åè®®-æœ¬åœ°-å¤–éƒ¨-çŠ¶æ€

- TCPçŠ¶æ€ï¼š
  - *LISTENING* æ­£åœ¨ç›‘å¬ï¼Œç­‰å¾…å®¢æˆ·ç«¯è¿æ¥ï¼ˆæœåŠ¡ç«¯ï¼‰
  - *ESTABLISHED* ï¼š è¿æ¥å·²ç»å»ºç«‹ï¼Œæ­£åœ¨è¿›è¡Œæ•°æ®ä¼ è¾“
  - *CLOSE_WAIT* : è¿œç¨‹å·²ç»å…³é—­è¿æ¥ï¼Œæœ¬åœ°ç­‰å¾…å…³é—­ã€‚å¿…é¡»ç”±æœ¬åœ°ä¸»åŠ¨close
  - *TIME_WAIT*  ï¼šè¿æ¥å·²ç»å…³é—­ï¼Œä¸ºäº†ä¿è¯æ®‹ç•™æ•°æ®åŒ…è¢«æ¥å—ï¼Œä¿æŒä¸€ä¸‹
  - *SYN_SENT*ï¼šä¸»åŠ¨å°è¯•è¿æ¥å¤–éƒ¨ï¼Œä½†è¿˜æ²¡æœ‰å›åº”ã€‚
  - *FIN_WAIT2*

# ss (socket statistics)

- `-a` 
- `-n` ç›´æ¥æ˜¾ç¤ºipç«¯å£ï¼Œä¸è§£æåŸŸå
- `-t`
- `-u`
- `-p`
- `-l` åªæ˜¾ç¤ºæ­£åœ¨ç›‘å¬

`ss -ntlp`

# ps

- `-e`  æ‰€æœ‰è¿›ç¨‹
- `-f` å®Œæ•´æ ¼å¼
- `-aux` æ‰€æœ‰è¿›ç¨‹ï¼›ç”¨æˆ·ä¸ºä¸»çš„æ ¼å¼æ˜¾ç¤ºï¼›æ˜¾ç¤ºåå°å®ˆæŠ¤

*USER ; PID ;  %CPU/%MEM; VSZ/RSSï¼ˆå ç”¨è™šæ‹Ÿå†…å­˜/ç‰©ç†å†…å­˜ï¼‰; STATï¼ˆè¿›ç¨‹çŠ¶æ€ï¼‰; START/TIMEï¼ˆå¯åŠ¨æ—¶é—´/å ç”¨æ—¶é—´ï¼‰; COMMAND*

STAT: 

- *R(Running)* 
- S(Interruptible Sleep) å¯ä¸­æ–­ç¡çœ ã€‚é€šå¸¸ç½‘ç»œIOåœ¨æ­¤é˜»å¡
- D(UnInterruptible Sleep) ä¸å¯ä¸­æ–­ç¡çœ ã€‚é€šå¸¸ç­‰å¾…ç£ç›˜IO
- T(Stopped) åœæ­¢äº†
- Z(Zombie) åƒµå°¸è¿›ç¨‹
- *+* è¿›ç¨‹æ˜¯å‰å°è¿›ç¨‹
- *<* é«˜ä¼˜å…ˆçº§
- *s* åŒ…å«å­è¿›ç¨‹
- *l* å¤šçº¿ç¨‹

**ä¾‹å­**

- `ps -o pid,stat,wchan,cmd -p [PID]` 

  - *wchan*åˆ—æ˜¾ç¤ºåœ¨å“ªä¸ªå†…æ ¸å‡½æ•°ç¡çœ 

- `sudo cat /proc/90105/stack`

  æŸ¥çœ‹ç›®å‰è°ƒç”¨æ ˆã€‚é˜»å¡å“ªä¸ªå‡½æ•°

# iptables



# KILL

è¿›ç¨‹å…³é—­

- `kill -9 <pid>` è¿›ç¨‹å…³é—­ï¼›TCPè¿æ¥å…³é—­ï¼›

è¿›ç¨‹å‡æ­»ï¼š

- `kill -STOP <PID>` å‘é€*SIGSTOP*ä¿¡å·ï¼Œ è¿›ç¨‹æŒ‚èµ·ï¼Œæš‚åœæ‰§è¡Œ
- `kill -CONT <pid>` å‘é€*SIIGCONT* , è¿›ç¨‹æ¢å¤ç»§ç»­æ‰§è¡Œ

